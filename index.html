<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Collection and Delivery Calculator</title>
  <!-- If you have Adobe Fonts embed codes for Begum and Gill Sans, include them here -->
  <link href="https://fonts.googleapis.com/css?family=Gill+Sans+Nova:300,400,600|Begum+Semi+Bold" rel="stylesheet">
  <style>
    /* Base Styles inspired by FARCO Brand Guidelines */
    body {
      background-color: #f8f8f8;
      font-family: 'Gill Sans Nova', 'Gill Sans', 'Helvetica Neue', sans-serif;
      color: #34434c; /* dark grey */
      margin: 20px;
      padding: 0;
    }
    /* Header container to center title & logo */
    #headerContainer {
      text-align: center;
      position: relative;
      margin-bottom: 20px;
    }
    #headerContainer h1 {
      display: inline-block;
      margin: 0;
      font-family: 'Begum Semi Bold', 'Gill Sans Nova', 'Gill Sans', sans-serif;
      font-size: 36px; /* Adjust as needed */
      vertical-align: middle;
      color: #34434c;
    }
    #logo {
      display: inline-block;
      vertical-align: middle;
      margin-left: 20px;
      height: 36px; /* same as the h1 height for scale */
    }
    #logo img {
      height: 100%;
      width: auto;
    }
    form {
      background-color: #ffffff;
      border: 1px solid #ddd;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
      border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    fieldset {
      border: none;
      margin-bottom: 15px;
      padding: 0;
    }
    fieldset legend {
      font-family: 'Begum Semi Bold', 'Gill Sans Nova', 'Gill Sans', sans-serif;
      font-size: 18px;
      margin-bottom: 10px;
      color: #34434c;
      text-align: left;
    }
    label {
      display: block;
      margin-top: 8px;
      font-size: 14px;
    }
    input[type="number"],
    select {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 2px;
      margin-top: 4px;
    }
    input[type="radio"],
    input[type="checkbox"] {
      margin-right: 5px;
    }
    button {
      background-color: #f7941d; /* FARCO Orange */
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 2px;
      cursor: pointer;
      margin-top: 20px;
      width: 100%;
    }
    button:hover {
      background-color: #e58317;
    }
    /* Center the result message */
    #resultMessage {
      text-align: center;
      margin-top: 20px;
    }
    /* FAQ Button */
    #faqButton {
      background-color: #34434c;
      font-size: 14px;
      padding: 8px 16px;
      width: auto;
      margin: 20px auto;
      display: block;
    }
    /* Modal styles for both POA and FAQ modals */
    #priceModal, #faqModal {
      position: fixed;
      top: 0; 
      left: 0;
      width: 100%; 
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    #priceModal .modal-content, #faqModal .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 4px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      max-width: 90%;
      font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
    }
    /* POA modal: center text */
    #priceModal .modal-content {
      text-align: center;
    }
    #priceModal button, #faqModal button {
      background-color: #f7941d;
      color: #fff;
      border: none;
      padding: 8px 16px;
      margin-top: 10px;
      cursor: pointer;
    }
    /* FAQ modal: left-aligned text, scrollable content */
    #faqModal .modal-content {
      text-align: left;
      max-height: 80vh;
      overflow-y: auto;
    }
    /* Table in FAQ */
    #faqModal table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    #faqModal th, #faqModal td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    #faqModal th {
      background-color: #f2f2f2;
      font-weight: bold;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div id="headerContainer">
    <h1>Collection and Delivery Calculator</h1>
    <div id="logo">
      <img src="logo.jpg" alt="Company Logo">
    </div>
  </div>
  <form id="calculatorForm">
    <!-- Client Type Section -->
    <fieldset>
      <legend>Client Type</legend>
      <label>
        <input type="checkbox" name="clientType" value="private" id="clientPrivate">
        Private Client
      </label>
      <label>
        <input type="checkbox" name="clientType" value="insurance" id="clientInsurance">
        Insurance
      </label>
    </fieldset>

    <!-- Private Client Section -->
    <div id="privateSection" class="hidden">
      <fieldset>
        <legend>Private Client Details</legend>
        <label>
          What is the total value of the items to be collected?
          <select id="privateTotalValue">
            <option value="">Select...</option>
            <option value="0-10000">£0 - £10,000</option>
            <option value="10001-20000">£10,001 - £20,000</option>
            <option value="20001-30000">£20,001 - £30,000</option>
            <option value="30001-40000">£30,001 - £40,000</option>
            <option value="40001-50000">£40,001 - £50,000</option>
            <option value="50000plus">£50,000+</option>
          </select>
        </label>
        <label>
          How many items are being collected?
          <input type="number" id="privateItemCount" min="1" value="1">
        </label>
        <label>
          What type of item/s are being collected?
          <br>
          <input type="radio" name="privateItemType" value="artwork"> Artwork
          <input type="radio" name="privateItemType" value="object"> Object
          <input type="radio" name="privateItemType" value="furniture"> Furniture
          <input type="radio" name="privateItemType" value="mixed"> Mixed
        </label>
      </fieldset>
      <fieldset>
        <legend>Second Person Required for Collection</legend>
        <label>
          <input type="radio" name="privateSecondPerson" value="no" checked> No
          <input type="radio" name="privateSecondPerson" value="advisable"> Advisable
          <input type="radio" name="privateSecondPerson" value="essential"> Essential
        </label>
      </fieldset>
      <fieldset>
        <legend>Crate Requirement</legend>
        <label>
          Is a crate required?
          <br>
          <input type="radio" name="privateCrateRequired" value="no" checked> No
          <input type="radio" name="privateCrateRequired" value="yes"> Yes
        </label>
      </fieldset>
      <fieldset id="privateCrateOptions" class="hidden">
        <legend>Crate Options</legend>
        <label>
          Select crate type:
          <br>
          <input type="radio" name="privateCrateType" value="inhouse"> In-house
          <input type="radio" name="privateCrateType" value="bespoke"> Bespoke
        </label>
      </fieldset>
      <fieldset>
        <legend>Trip Type</legend>
        <label>
          <input type="radio" name="privateTripType" value="oneway" checked> One-way
        </label>
        <label>
          <input type="radio" name="privateTripType" value="roundtrip"> Round Trip
        </label>
      </fieldset>
    </div>

    <!-- Insurance Section -->
    <div id="insuranceSection" class="hidden">
      <!-- New Insurance Coverage Fields -->
      <fieldset id="insuranceCoverageStart">
        <legend>Insurance Coverage</legend>
        <label>
          What is the total value to be collected?
          <input type="number" id="insuranceTotalValueInput" min="0" value="0">
        </label>
        <label>
          Is insurance being extended whilst in our care?
          <br>
          <input type="radio" name="insuranceExtended" value="yes"> Yes
          <input type="radio" name="insuranceExtended" value="no"> No
        </label>
      </fieldset>
      <fieldset>
        <legend>Insurance Details</legend>
        <label>
          Was this collection part of a surge response?
          <br>
          <input type="radio" name="insuranceSurge" value="yes"> Yes
          <input type="radio" name="insuranceSurge" value="no" checked> No
        </label>
      </fieldset>
      <fieldset>
        <legend>Collection Route</legend>
        <label>
          Is collection/delivery on a normal route?
          <br>
          <!-- Neither option preselected -->
          <input type="radio" name="insuranceNormalRoute" value="yes"> Yes
          <input type="radio" name="insuranceNormalRoute" value="no"> No
        </label>
      </fieldset>
      <!-- If Normal Route is No, show dedicated collection details -->
      <div id="insuranceDedicated" class="hidden">
        <fieldset>
          <legend>Dedicated Collection Details</legend>
          <label>
            How many vans are being sent as part of a dedicated collection for this job?
            <input type="number" id="insuranceNumVans" min="0" value="0">
          </label>
          <label>
            How many additional people are being sent for this job?
            <input type="number" id="insuranceNumPeople" min="0" value="0">
          </label>
        </fieldset>
      </div>
      <!-- If Normal Route is Yes, show standard collection details -->
      <fieldset id="insuranceStandardDetails" class="hidden">
        <legend>Collection Details</legend>
        <label>
          Is a second person required for collection?
          <br>
          <input type="radio" name="insuranceSecondPerson" value="no" checked> No
          <input type="radio" name="insuranceSecondPerson" value="advisable"> Advisable
          <input type="radio" name="insuranceSecondPerson" value="essential"> Essential
        </label>
      </fieldset>
      <fieldset id="insuranceItemDetails" class="hidden">
        <legend>Item Details</legend>
        <label>
          What type of item/s are being collected?
          <br>
          <input type="radio" name="insuranceItemType" value="artwork"> Artwork
          <input type="radio" name="insuranceItemType" value="objects"> Objects
          <input type="radio" name="insuranceItemType" value="furniture"> Furniture
          <input type="radio" name="insuranceItemType" value="mixed"> Mixed
        </label>
        <label>
          How many item/s are being collected?
          <input type="number" id="insuranceNumItems" min="1" value="1">
        </label>
      </fieldset>
    </div>

    <button type="button" onclick="calculateTotal()">Calculate Total</button>
  </form>

  <h2 id="resultMessage">Total Price: £<span id="totalPrice">0.00</span></h2>

  <!-- FAQ Button -->
  <div style="text-align: center; margin-top: 20px;">
    <button type="button" id="faqButton" onclick="showFaqModal()">FAQ</button>
  </div>

  <!-- Modal for POA messages -->
  <div id="priceModal">
    <div class="modal-content">
      <p id="modalText">POA – please speak to Chris, Anna or Julia for a cost</p>
      <button onclick="closePriceModal()">Close</button>
    </div>
  </div>

  <!-- Modal for FAQ -->
  <div id="faqModal" class="hidden">
    <div class="modal-content">
      <h2>FAQ</h2>
      <p>
        The calculator runs based on our centralised pricing systems for collection and delivery using the following guidelines:
      </p>
      <h3>Private Clients</h3>
      <p>
        Before collecting an item, we must always confirm with the client:
      </p>
      <ul>
        <li>The declared value of the artwork/decorative object.</li>
        <li>The level of extended cover they require while the item is in our care, if any.</li>
        <li>Whether the item is to be covered under their own insurance while entrusted to us (including during transit and while in the studio).</li>
        <li>How many items are to be collected.</li>
      </ul>
      <p>
        <table>
          <tr>
            <th>Specified Value Collection (max 3 items)</th>
            <th>Delivery Cost (Each Way)</th>
          </tr>
          <tr>
            <td>£0 - £10,000</td>
            <td>£90</td>
          </tr>
          <tr>
            <td>£10,001 - £20,000</td>
            <td>£120</td>
          </tr>
          <tr>
            <td>£20,001 - £30,000</td>
            <td>£160</td>
          </tr>
          <tr>
            <td>£30,001 - £40,000</td>
            <td>£210</td>
          </tr>
          <tr>
            <td>£40,001 - £50,000</td>
            <td>£280</td>
          </tr>
          <tr>
            <td>£50,000+</td>
            <td>POA (Chris, Anna, Julia to advise)</td>
          </tr>
        </table>
      </p>
      <p>
        For low value items (under £10,000) a surcharge of £25 per item will be added for collections greater than 3. For larger collections of more valuable pieces please consult Chris, Anna or Julia.
      </p>
      <p>
        The above covers items that will be with us for up to 12 weeks. If an item is here for storage or is anticipated to be with us longer than the specified 12 weeks, please consult Chris, Anna or Julia.
      </p>
      <p>
        For the question “is a second person needed for collection”, a judgment call must be made regarding how essential a second person is. If it is just for ease, select “advisable”; if it is completely necessary, choose “essential.”
      </p>
      <h3>Insurance Clients</h3>
      <p>
        Before collecting items for our insurance clients, we must confirm:
      </p>
      <ul>
        <li>The total declared value of the pieces to be collected.</li>
        <li>The level of extended cover required while the items are in our care, if any.</li>
        <li>Whether the items are to be covered under their own insurance while entrusted to us (including during transit and while in the studio).</li>
        <li>How many items are to be collected.</li>
      </ul>
      <p>
        For collections where the total value is less than £50,000 and insurance is being extended, use the form to calculate collection costs. For collections where the total value is greater than £50,000 or insurance is not being extended, consult Chris, Anna or Julia.
      </p>
      <p>
        Please note whether the collection falls as part of a surge response – if unclear, seek clarity from Julia.
      </p>
      <p>
        For the question “is a second person needed for collection”, a judgment call must be made regarding how essential a second person is. If it is just for ease, select “advisable”; if it is completely necessary, choose “essential”.
      </p>
      <p>
        Where a dedicated collection is being arranged, work on the basis of 1 van = 1 driver. So any additional people fall outside of this (eg. if we send one van with two people, there would be one additional person / if we send three vans with three people there would be no additional people).
       </p>
      <button onclick="closeFaqModal()">Close FAQ</button>
    </div>
  </div>

  <script>
    // Function to show the POA modal with a custom message
    function showPriceModal(message) {
      document.getElementById('modalText').innerHTML = message;
      document.getElementById('priceModal').style.display = "flex";
    }
    // Function to close the POA modal
    function closePriceModal() {
      document.getElementById('priceModal').style.display = "none";
    }
    // Function to show the FAQ modal
    function showFaqModal() {
      document.getElementById('faqModal').style.display = "flex";
    }
    // Function to close the FAQ modal
    function closeFaqModal() {
      document.getElementById('faqModal').style.display = "none";
    }

    // Toggle client type sections
    const privateCheckbox = document.getElementById('clientPrivate');
    const insuranceCheckbox = document.getElementById('clientInsurance');

    privateCheckbox.addEventListener('change', function() {
      if (this.checked) {
        insuranceCheckbox.checked = false;
        document.getElementById('privateSection').classList.remove('hidden');
        document.getElementById('insuranceSection').classList.add('hidden');
      } else {
        document.getElementById('privateSection').classList.add('hidden');
      }
    });

    insuranceCheckbox.addEventListener('change', function() {
      if (this.checked) {
        privateCheckbox.checked = false;
        document.getElementById('insuranceSection').classList.remove('hidden');
        document.getElementById('privateSection').classList.add('hidden');
      } else {
        document.getElementById('insuranceSection').classList.add('hidden');
      }
    });

    // Show crate options if "Yes" is selected for crate requirement.
    document.getElementsByName('privateCrateRequired').forEach(radio => {
      radio.addEventListener('change', function() {
        const crateOptions = document.getElementById('privateCrateOptions');
        if (this.value === "yes") {
          crateOptions.classList.remove('hidden');
        } else {
          crateOptions.classList.add('hidden');
        }
      });
    });

    // For Insurance branch: show/hide details based on the normal route answer.
    document.getElementsByName('insuranceNormalRoute').forEach(radio => {
      radio.addEventListener('change', function() {
        if (this.value === 'no') {
          document.getElementById('insuranceDedicated').classList.remove('hidden');
          document.getElementById('insuranceStandardDetails').classList.add('hidden');
          document.getElementById('insuranceItemDetails').classList.add('hidden');
        } else {
          document.getElementById('insuranceDedicated').classList.add('hidden');
          document.getElementById('insuranceStandardDetails').classList.remove('hidden');
          document.getElementById('insuranceItemDetails').classList.remove('hidden');
        }
      });
    });

    // Immediately show modal when insuranceExtended is set to "no"
    document.getElementsByName('insuranceExtended').forEach(radio => {
      radio.addEventListener('change', function() {
        if (this.value === "no") {
          showPriceModal("POA – please speak to Chris, Anna or Julia for a cost to determine our insurance coverage");
        }
      });
    });

    function calculateTotal() {
      let total = 0;
      let priceOnAsking = false;
      const resultMessage = document.getElementById('resultMessage');
      resultMessage.style.color = "black"; // Reset styling

      // PRIVATE CLIENT CALCULATIONS
      if (privateCheckbox.checked) {
        const totalValue = document.getElementById('privateTotalValue').value;
        const numItems = parseInt(document.getElementById('privateItemCount').value, 10);
        const itemTypeElem = document.querySelector('input[name="privateItemType"]:checked');
        if (!totalValue || isNaN(numItems) || numItems < 1 || !itemTypeElem) {
          alert("Please complete all Private Client fields.");
          return;
        }
        // Base Price Calculation:
        if (numItems <= 3) {
          switch(totalValue) {
            case "0-10000":
              total += 90;
              break;
            case "10001-20000":
              total += 120;
              break;
            case "20001-30000":
              total += 160;
              break;
            case "30001-40000":
              total += 210;
              break;
            case "40001-50000":
              total += 270;
              break;
            case "50000plus":
              priceOnAsking = true;
              break;
          }
        } else { // More than 3 items
          if (totalValue === "0-10000") {
            total += 90 + 25 * (numItems - 3);
          } else {
            priceOnAsking = true;
          }
        }
        if (priceOnAsking) {
          if (totalValue === "50000plus" && numItems <= 3) {
            showPriceModal("POA – please speak to Chris, Anna or Julia for a cost owing to item value");
          } else if (numItems > 3 && totalValue !== "0-10000") {
            showPriceModal("POA – please speak to Chris, Anna or Julia for a cost owing to number of high value items");
          }
          return;
        }
        // Second Person Requirement Cost
        const secondPersonElem = document.querySelector('input[name="privateSecondPerson"]:checked');
        const secondPerson = secondPersonElem ? secondPersonElem.value : "no";
        if (secondPerson === "advisable") {
          total += 250;
        } else if (secondPerson === "essential") {
          total += 500;
        }
        // Crate Requirement
        const crateRequiredElem = document.querySelector('input[name="privateCrateRequired"]:checked');
        if (crateRequiredElem && crateRequiredElem.value === "yes") {
          const crateTypeElem = document.querySelector('input[name="privateCrateType"]:checked');
          if (crateTypeElem) {
            if (crateTypeElem.value === "inhouse") {
              if (totalValue === "0-10000" || totalValue === "10001-20000" || totalValue === "20001-30000") {
                total += 180;
              } else if (totalValue === "30001-40000" || totalValue === "40001-50000") {
                total += 240;
              }
            } else if (crateTypeElem.value === "bespoke") {
              priceOnAsking = true;
            }
          }
          if (priceOnAsking) {
            showPriceModal("POA – please speak to Chris, Anna or Julia for a cost for a bespoke crate");
            return;
          }
        }
        // Trip Type Adjustment
        const tripTypeElem = document.querySelector('input[name="privateTripType"]:checked');
        if (tripTypeElem && tripTypeElem.value === "roundtrip") {
          total *= 2;
        }
      }
      // INSURANCE CALCULATIONS
      else if (insuranceCheckbox.checked) {
        // New Insurance Coverage Fields:
        const insuranceTotalValueInput = document.getElementById('insuranceTotalValueInput').value;
        const insuranceExtended = document.querySelector('input[name="insuranceExtended"]:checked');
        if (insuranceTotalValueInput === "" || !insuranceExtended) {
          alert("Please complete the insurance coverage fields.");
          return;
        }
        const insuranceTotalValue = parseFloat(insuranceTotalValueInput);
        if (insuranceExtended.value === "yes") {
          if (insuranceTotalValue >= 50001) {
            showPriceModal("POA – please speak to Chris, Anna or Julia for a cost owing to high collection value");
            return;
          }
          // Otherwise, continue with Insurance calculations.
        } else {
          showPriceModal("POA – please speak to Chris, Anna or Julia for a cost to determine our insurance coverage");
          return;
        }
        // Continue with remaining Insurance calculations.
        const insuranceSurge = document.querySelector('input[name="insuranceSurge"]:checked');
        if (insuranceSurge && insuranceSurge.value === "yes") {
          total += 400;
        }
        const insuranceNormalRoute = document.querySelector('input[name="insuranceNormalRoute"]:checked');
        if (insuranceNormalRoute) {
          if (insuranceNormalRoute.value === "no") {
            const numVans = parseFloat(document.getElementById('insuranceNumVans').value) || 0;
            const numPeople = parseFloat(document.getElementById('insuranceNumPeople').value) || 0;
            total += (numVans * 1000) + (numPeople * 500);
          } else {
            // For normal route = yes, add 90 first.
            total += 90;
            const insuranceSecondPerson = document.querySelector('input[name="insuranceSecondPerson"]:checked');
            if (insuranceSecondPerson) {
              if (insuranceSecondPerson.value === "advisable") {
                total += 250;
              } else if (insuranceSecondPerson.value === "essential") {
                total += 500;
              }
            }
            const insuranceItemType = document.querySelector('input[name="insuranceItemType"]:checked');
            const insuranceNumItems = parseFloat(document.getElementById('insuranceNumItems').value) || 0;
            if (insuranceItemType && insuranceNumItems > 0) {
              const additionalItems = Math.max(insuranceNumItems - 1, 0);
              const insuranceSecondPersonVal = insuranceSecondPerson ? insuranceSecondPerson.value : "no";
              if (insuranceSecondPersonVal === "no") {
                if (insuranceItemType.value === "artwork" || insuranceItemType.value === "objects") {
                  total += additionalItems * 10;
                } else if (insuranceItemType.value === "furniture" || insuranceItemType.value === "mixed") {
                  total += additionalItems * 20;
                }
              } else {
                total += additionalItems * 25;
              }
            }
          }
        }
      }
      document.getElementById('totalPrice').textContent = total.toFixed(2);
    }
  </script>
</body>
</html>
